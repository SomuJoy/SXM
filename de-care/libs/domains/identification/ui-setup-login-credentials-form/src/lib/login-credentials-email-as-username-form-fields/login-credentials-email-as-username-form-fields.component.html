<div [formGroup]="form" *ngIf="form.contains('username') && form.contains('password')">
    <sxm-ui-text-form-field
        formControlName="username"
        [labelText]="translateKeyPrefix + 'USERNAME.LABEL' | translate"
        data-e2e="setupLoginCredentials.usernameField"
    ></sxm-ui-text-form-field>
    <div *ngIf="form.controls.username | formControlInvalid: submitted" class="invalid-feedback" data-e2e="setupLoginCredentials.usernameError">
        <p *ngIf="form.controls.username.errors.required">{{ translateKeyPrefix + "USERNAME.ERRORS.REQUIRED" | translate }}</p>
        <p *ngIf="form.controls.username.errors.usernameInUse">
            {{ translateKeyPrefix + "USERNAME.ERRORS.USERNAME_IN_USE" | translate }}
        </p>
        <p *ngIf="form.controls.username.errors.invalidUsername">
            {{ translateKeyPrefix + "USERNAME.ERRORS.INVALID_USERNAME" | translate }}
        </p>
        <p *ngIf="form.controls.username.errors.pattern">{{ translateKeyPrefix + "USERNAME.ERRORS.PATTERN" | translate }}</p>
    </div>
    <sxm-ui-password-strength
        formControlName="password"
        [labelText]="translateKeyPrefix + 'PASSWORD.LABEL' | translate"
        id="{{ passwordElementId }}"
        data-e2e="setupLoginCredentials.passwordField"
        [reservedWords]="reservedWords"
        [class.invalid]="form.controls.password | formControlInvalid: submitted"
        [alwaysDisplayPasswordHint]="false"
        [hidePasswordHintFeature]="true"
    ></sxm-ui-password-strength>
    <div
        *ngIf="(passwordStrengthEventsHaveEvaluated$ | async) !== -1 && (form.controls.password | formControlInvalid: submitted)"
        class="invalid-feedback"
        data-e2e="setupLoginCredentials.passwordError"
    >
        <p *ngIf="form.controls.password.hasError('required')">
            {{ translateKeyPrefix + "PASSWORD.ERRORS.REQUIRED" | translate }}
        </p>
        <p *ngIf="form.controls.password.hasError('length')">
            {{ translateKeyPrefix + "PASSWORD.ERRORS.LENGTH" | translate: form.controls.password.errors.length }}
        </p>
        <p *ngIf="form.controls.password.hasError('policy')">
            {{ translateKeyPrefix + "PASSWORD.ERRORS.POLICY" | translate }}
        </p>
        <p *ngIf="form.controls.password.hasError('generic')">
            {{ translateKeyPrefix + "PASSWORD.ERRORS.GENERIC" | translate }}
        </p>
        <p *ngIf="form.controls.password.errors?.reservedWords as reservedWordsError">
            {{
                translateKeyPrefix + "PASSWORD.ERRORS.RESERVED_WORDS"
                    | translate
                        : {
                              pluralWord: reservedWordsError.words.length | i18nPlural: (translateKeyPrefix + "PASSWORD.PLURAL_MAP.WORD" | translate),
                              reservedWords: reservedWordsError.words.join(", ")
                          }
            }}
        </p>
    </div>
</div>
